YUI.add("fluid-modal-view",function(e,t){"use strict";var n=require("hermes-core/flog")(t),r,i;r={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},i={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.set("isActiveViewAgnostic",!0);var n=this.get("modalOverlayType");return this.alreadyShowingModal=n.alreadyShowingModal(),this.alreadyShowingModal||(n.add(this),e.OverlayManager.ModalOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList")})),this},activate:function(){var t=this.get("container"),n=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(r.css.closeX).on(["click","keydown"],function(e){(e.type==="click"||e.keyCode===13)&&this.handleX(e)},this)),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(r.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(r.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){n.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){n.reposition()})),this.get("navBarView")&&n.get("navBarView").activate(),this.get("subview")&&(n.get("subview").normalizedActivate(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))),this.registerEventHandler(t.delegate("keydown",this.keyboardSelectRadio.bind(this),"label")),this.registerEventHandler(t.ancestor("body").once("key",this.focusOnFirstTab.bind(this),"down:9")),e.Accessibility.manageFocusOutlines(this),this.registerEventHandler(e.on("modal:updateText",function(e){n.set("title",e.title),n.set("cancelButtonLabel",e.cancelText),n.set("actionButtonLabel",e.actionText),t.one(".title").set("textContent",e.title),t.one(".cancel").set("textContent",e.cancelText),t.one(".action").set("textContent",e.actionText)})),this.fire("activated"),this},focusOnFirstTab:function(e){var t=this.get("container").one("[tabindex]");t&&t.focus()},keyboardSelectRadio:function(e){if(e.keyCode===13){var t=this.get("container").one("#"+e.target.getAttribute("for"));t.set("checked",!t.get("checked"))}},clearOutline:function(){var t=e.one(document.activeElement);t&&t.addClass("no-outline")},restoreOutline:function(){var e=this.get("container").one(":focus");e&&e.removeClass("no-outline")},show:function(){return this.initialize().then(null,function(e){n.error("Error initializing modal",{err:e})}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,s=e.one(r.css.destinationContainer),o;o={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),lightOverlay:this.get("lightOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList"),contentPadding:this.get("contentPadding")},this.get("buttonFlavorText")&&(o.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerWithTemplate("fluid-modal",o),i.modal.width=this.get("width"),i.modal.minWidth=this.get("minWidth"),i.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(r.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(r.css.subviewContent)
.appendChild(e.get("container")),s&&(s.append(t.get("container")),t.reposition()),t.activate()},function(e){n.error("Error initializing modal subview",{err:e})})):s&&(s.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),n=t.one(this.get("modalSelector")),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=i.modal.width?parseInt(i.modal.width,10):parseInt(n.getComputedStyle("width"),10),f,l=20,c={},h,p,d=n.one(".body"),v=0,m=this.get("showFooter")?parseInt(n.one(".foot").getComputedStyle("height"),10):0,g=0,y=parseInt(d.getComputedStyle("borderTopWidth"),10)+parseInt(d.getComputedStyle("borderBottomWidth"),10),b={},w;i.modal.height&&(w=n.one(".head"),v=w?parseInt(n.one(".head").getComputedStyle("height"),10):0,g=i.modal.height,n.get("showFooter")&&(m=parseInt(n.one(".foot").getComputedStyle("height"),10)),i.modal.height+v+m+4*l+y>=u&&(u<=700?g=u-v-m-y:g=u-v-m-4*l-y),n.setStyles({maxHeight:"none"}),this.get("fullWindow")?b.height=g+"px":this.get("maxHeight")&&(b.maxHeight=g+"px"),n.one(r.css.modalContent).setStyles(b)),f=parseInt(n.getComputedStyle("height"),10),h=n.getDOMNode().scrollHeight,p=n.getDOMNode().scrollWidth,c={top:"50%",left:"50%",width:i.modal.width?a+"px":"",marginTop:-(f/2)+"px",marginLeft:-(a/2)+"px",minWidth:i.modal.minWidth?i.modal.minWidth+"px":""},f+2*l>u||h>f+1||a+2*l>o||p>a?(u<=700&&i.modal.height?c.maxHeight=u-10+"px":(c.maxHeight=u-2*l+"px",c.overflow="auto"),c.maxWidth=o-2*l+"px",c.marginTop=-(Math.min(parseInt(c.maxHeight,10),f)/2)+"px",c.marginLeft=-(Math.min(parseInt(c.maxWidth,10),a)/2)+"px"):(c.maxHeight="inherit",c.maxWidth="inherit",c.overflow="visible"),n.setStyles(c)},handleX:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),r&&r.handleX&&r.handleX(),this.close(n),this.fire("cancelClick",n)},handleCancel:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick");if(!r||!r.handleCancel||r.handleCancel()!==!1)this.fire("cancelClick",n),this.close(n)},handleAction:function(e){var t=this.get("subview");if(!t||!t.handleAction||t.handleAction()!==!1)this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),this.get("removeOverlayOnClose")||this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},lightOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay},removeOverlayOnClose:{value:!1},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},contentPadding:{value:undefined,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-modal","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-signup-modal",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return" "+e.escapeExpression((s=(s=n.signUpHeaderClass||(t!=null?t.signUpHeaderClass:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"signUpHeaderClass",hash:{},data:i}):s))},3:function(e,t,n,r,i){var s;return" style=\"background-image:url('"+e.escapeExpression((s=(s=n.signUpHeaderImage||(t!=null?t.signUpHeaderImage:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"signUpHeaderImage",hash:{},data:i}):s))+"')\""},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="signup-modal-body">\n	<div class="head'+((s=n["if"].call(u,t!=null?t.signUpHeaderClass:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"'+((s=n["if"].call(u,t!=null?t.signUpHeaderImage:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></div>\n	<h3 class="signup-title">'+l((o=(o=n.signUpTitle||(t!=null?t.signUpTitle:t))!=null?o:a,typeof o===f?o.call(u,{name:"signUpTitle",hash:{},data:i}):o))+'</h3>\n	<p class="signup-message">'+l((o=(o=n.signUpMessage||(t!=null?t.signUpMessage:t))!=null?o:a,typeof o===f?o.call(u,{name:"signUpMessage",hash:{},data:i}):o))+'</p>\n	<button class="large action signup-button">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i}))+'</button>\n</div>\n<div class="signup-modal-footer">\n	<span>'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.HAVE_YAHOO_ACCOUNT"},data:i}))+'</span>\n	<a href="#" class="signin-link">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("signup-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").SignUpModal=e.FlickrView.create(this.name,e.Views.FluidModal,[],{initializer:function(e){return this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",e.signUpHeaderClass),this.set("signUpHeaderImage",e.signUpHeaderImage),this.set("signUpTitle",e.signUpTitle),this.set("signUpMessage",e.signUpMessage),this.set("beaconPrefix",e.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalShow");var t={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(t)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",t),this.constructor.superclass.handleAction.call(this)},handleAction:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",t),this.constructor.superclass.handleAction.call(this)},handleCancel:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-fluid-share",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" disable-sharing"},3:function(e,t,n,r,i){return' title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"share-modal.SHARING_DISABLED"},data:i}))+'" '},5:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression((s=(s=n.shareTooltip||(t!=null?t.shareTooltip:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"shareTooltip",hash:{},data:i}):s))+'"'},7:function(e,t,n,r,i){var s,o=t!=null?t:{};return"		<span "+((s=n["if"].call(o,t!=null?t.sharingDisabled:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+' class="fluid-share-button-label">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"share-modal.SHARE"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="fluid-share-button '+l((o=(o=n.extraShareButtonClassList||(t!=null?t.extraShareButtonClassList:t))!=null?o:a,typeof o===f?o.call(u,{name:"extraShareButtonClassList",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.sharingDisabled:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"\n'+((s=n["if"].call(u,t!=null?t.sharingDisabled:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+' tabindex="0">\n\n	<span '+((s=n["if"].call(u,t!=null?t.sharingDisabled:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+' class="fluid-share-icon '+l((o=(o=n.extraShareButtonIconClassList||(t!=null?t.extraShareButtonIconClassList:t))!=null?o:a,typeof o===f?o.call(u,{name:"extraShareButtonIconClassList",hash:{},data:i}):o))+'"></span>\n'+((s=n["if"].call(u,t!=null?t.showShareButtonLabel:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n </div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-tumblr-post",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return"	<strong>"+f((s=(s=n.title||(t!=null?t.title:t))!=null?s:u,typeof s===a?s.call(o,{name:"title",hash:{},data:i}):s))+' <a href="'+f((s=(s=n.ownerURL||(t!=null?t.ownerURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"ownerURL",hash:{},data:i}):s))+'">'+f((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{user:t!=null?t.ownerName:t,intlName:"common.BY_USER"},data:i}))+"</a></strong>\n"},3:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.ownerURL:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:""},4:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<strong><a href="'+f((s=(s=n.ownerURL||(t!=null?t.ownerURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"ownerURL",hash:{},data:i}):s))+'">'+f((s=(s=n.title||(t!=null?t.title:t))!=null?s:u,typeof s===a?s.call(o,{name:"title",hash:{},data:i}):s))+"</a></strong>\n"},6:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<strong><a href="'+f((s=(s=n.linkToShare||(t!=null?t.linkToShare:t))!=null?s:u,typeof s===a?s.call(o,{name:"linkToShare",hash:{},data:i}):s))+'">'+f((s=(s=n.title||(t!=null?t.title:t))!=null?s:u,typeof s===a?s.call(o,{name:"title",hash:{},data:i}):s))+"</a></strong>\n"},8:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<br /><i>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"share-modal.VIA_FLICKR"},data:i}))+"</i>\n	<br />"+u((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||o).call(s,t!=null?t.description:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.ownerName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-tumblr-post",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-loading-state",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return"<!-- okay, not ideal, but this is just a loading state so we inline some styles -->\n<style>\n@keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);transform:translateX(12px)}}\n@-webkit-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);transform:translateX(12px)}}\n@keyframes blueBall{50%{-webkit-transform:translateX(-12px);transform:translateX(-12px)}}\n@-webkit-keyframes blueBall{50%{-webkit-transform:translateX(-12px);transform:translateX(-12px)}}\n.fluid .balls{position:relative;width:24px;height:12px;margin:0 auto;display:inline-block}.fluid .balls::before,.fluid .balls::after{position:absolute;top:0;width:12px;height:12px;content:'';border-radius:100%;-webkit-animation:pinkBall 1.6s ease-in-out infinite;animation:pinkBall 1.6s ease-in-out infinite}.fluid .balls::before{background:#ff329c;left:0}.fluid .balls::after{-webkit-animation:blueBall 1.6s ease-in-out infinite;animation:blueBall 1.6s ease-in-out infinite;background:#0063dc;right:0}#yui3-css-stamp.fluid-balls-css{display:none}\n\n.fluid.sharing-loader .balls {\n	margin: 80px auto;\n	display: block;\n}\n</style>\n\n\n<div class=\"sharing-loader fluid\">\n"+((s=e.invokePartial(r["flickr-balls"],t,{name:"flickr-balls",data:i,indent:"	",helpers:n,partials:r,decorators:e.decorators}))!=null?s:"")+"</div>"},usePartial:!0,useData:!0}),r={};e.Array.each(["flickr-balls"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-loading-state",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});
YUI.add("hermes-template-fluid-share-panel",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" sharing-type-disabled"},3:function(e,t,n,r,i){return" sharing-type-enabled"},5:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canNotShareTitle:s,t))+'"'},7:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canNotShareTitle:s,t))+'"'},9:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canNotShareTitle:s,t))+'"'},11:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canNotShareTitle:s,t))+'"'},13:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canNotShareTitle:s,t))+'"'},15:function(e,t,n,r,i){return" single-link-field"},17:function(e,t,n,r,i){return" ms-edge "},19:function(e,t,n,r,i){return" single-link"},21:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-embedr-in-share",{name:"isFlipped",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.isNotFlipped||t&&t.isNotFlipped||u).call(o,"enable-embedr-in-share",{name:"isNotFlipped",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.linkShareDisplay:t)!=null?s.bbCode:s,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))!=null?s:"")},22:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.linkShareDisplay:t)!=null?s.embedr:s,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))!=null?s:""},23:function(e,t,n,r,i){return'									<span class="link-type-button embed-type-button">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMBED"},data:i}))+"</span>\n"},25:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,(s=t!=null?t.linkShareDisplay:t)!=null?s.embedr:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.linkShareDisplay:t)!=null?s.iframe:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")},26:function(e,t,n,r,i){return'									<span class="link-type-button embed-type-button">HTML</span>\n'},28:function(e,t,n,r,i){return'									<span class="link-type-button iframe-type-button">IFRAME</span>\n'},30:function(e,t,n,r,i){return'								<span class="link-type-button bbcode-type-button">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.BBCODE"},data:i}))+"</span>\n"},32:function(e,t,n,r,i){return" single-highlight"},34:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'						<div class="grab-link-only grab-link">\n\n'+((s=n["if"].call(u,t!=null?t.canHaveGuestpass:t,{name:"if",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n							<input readonly type="text" class="grab-link-text-field" value="'+l((o=(o=n.grabLink||(t!=null?t.grabLink:t))!=null?o:a,typeof o===f?o.call(u,{name:"grabLink",hash:{},data:i}):o))+'">\n\n							<div class="grab-link-loader '+((s=n.unless.call(u,t!=null?t.canHaveGuestpass:t,{name:"unless",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n.unless.call(u,t!=null?t.choiceOfPermission:t,{name:"unless",hash:{},fn:e.program(40,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder hide-reminder'+((s=n["if"].call(u,t!=null?t.canHaveGuestpass:t,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">'+l((o=(o=n.privacyWarningString||(t!=null?t.privacyWarningString:t))!=null?o:a,typeof o===f?o.call(u,{name:"privacyWarningString",hash:{},data:i}):o))+"</div>\n								"+((s=n["if"].call(u,t!=null?t.showDownloadWarning:t,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</div>\n\n						</div>\n"},35:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.choiceOfPermission:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:""},36:function(e,t,n,r,i){var s;return'								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">'+e.escapeExpression((s=(s=n.grabLinkDefaultPermission||(t!=null?t.grabLinkDefaultPermission:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"grabLinkDefaultPermission",hash:{},data:i}):s))+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n'},38:function(e,t,n,r,i){return" no-permission-loader"},40:function(e,t,n,r,i){return"no-permission-loader"},42:function(e,t,n,r,i){return" with-guestpasses "},44:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="grab-link-download-reminder">'+a((s=(s=n.downloadAccessString||(t!=null?t.downloadAccessString:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"downloadAccessString",hash:{},data:i}):s))+" "+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{url:"/account/prefs/downloads/",intlName:"share-modal.CHANGE_DOWNLOAD_PREF"},data:i}))+"</div>"},46:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'						<div class="sliding-frame">\n\n							<div class="link-type-content grab-link">\n\n'+((s=n["if"].call(u,t!=null?t.canHaveGuestpass:t,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n								<input readonly type="text" class="grab-link-text-field" value="'+
l((o=(o=n.grabLink||(t!=null?t.grabLink:t))!=null?o:a,typeof o===f?o.call(u,{name:"grabLink",hash:{},data:i}):o))+'">\n\n								<div class="grab-link-loader '+((s=n.unless.call(u,t!=null?t.choiceOfPermission:t,{name:"unless",hash:{},fn:e.program(40,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"><div class="balls"></div></div>\n\n								<div class="grab-link-reminders">\n									<div class="grab-link-privacy-reminder '+((s=n.unless.call(u,t!=null?t.canHaveGuestpass:t,{name:"unless",hash:{},fn:e.program(50,i,0),inverse:e.program(42,i,0),data:i}))!=null?s:"")+'">'+l((o=(o=n.privacyWarningString||(t!=null?t.privacyWarningString:t))!=null?o:a,typeof o===f?o.call(u,{name:"privacyWarningString",hash:{},data:i}):o))+"</div>\n									"+((s=n["if"].call(u,t!=null?t.showDownloadWarning:t,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n								</div>\n\n							</div>\n\n"+((s=n["if"].call(u,(s=t!=null?t.linkShareDisplay:t)!=null?s.embedr:s,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.linkShareDisplay:t)!=null?s.iframe:s,{name:"if",hash:{},fn:e.program(54,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.linkShareDisplay:t)!=null?s.bbCode:s,{name:"if",hash:{},fn:e.program(56,i,0),inverse:e.noop,data:i}))!=null?s:"")+"						</div>\n\n"},47:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.choiceOfPermission:t,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))!=null?s:""},48:function(e,t,n,r,i){var s;return'									<div class="grab-link-permission-field grab-link-field">\n										<span class="grab-link-permission-label">'+e.escapeExpression((s=(s=n.grabLinkDefaultPermission||(t!=null?t.grabLinkDefaultPermission:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"grabLinkDefaultPermission",hash:{},data:i}):s))+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n'},50:function(e,t,n,r,i){return" hide-reminder"},52:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'								<div class="link-type-content html-embed">\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.defaultSizeStr:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="embed-code-text-field" value="'+a((s=(s=n.defaultEmbedrCode||(t!=null?t.defaultEmbedrCode:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"defaultEmbedrCode",hash:{},data:i}):s))+'">\n\n								</div>\n'},54:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'								<div class="link-type-content html-iframe-embed">\n									<div class="iframe-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.defaultIframeSizeStr:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="iframe-code-text-field" value="'+a((s=(s=n.defaultIframeCode||(t!=null?t.defaultIframeCode:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"defaultIframeCode",hash:{},data:i}):s))+'">\n								</div>\n'},56:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'								<div class="link-type-content html-bb-embed">\n									<input readonly type="text" class="bb-code-text-field" value="'+a((s=(s=n.defaultBBCode||(t!=null?t.defaultBBCode:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"defaultBBCode",hash:{},data:i}):s))+'">\n									<div class="bb-code-size-field embed-size-field">\n										<span class="embed-code-label">\n											'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.defaultBBCodeSizeStr:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n								</div>\n'},58:function(e,t,n,r,i){var s;return'				<div class="mail-perm-field">\n					<span class="mail-permission-label">'+e.escapeExpression((s=(s=n.grabLinkDefaultPermission||(t!=null?t.grabLinkDefaultPermission:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"grabLinkDefaultPermission",hash:{},data:i}):s))+'</span>\n					<span class="dropdown-arrow"></span>\n				</div>\n'},60:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"if",hash:{},fn:e.program(61,i,0),inverse:e.noop,data:i}))!=null?s:""},61:function(e,t,n,r,i){return'						<div class="tertiary non-public-warning">'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"</div>\n"},63:function(e,t,n,r,i){return"make-room-for-dropdown"},65:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"if",hash:{},fn:e.program(66,i,0),inverse:e.noop,data:i}))!=null?s:""},66:function(e,t,n,r,i){return"make-room-for-warning"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=e.lambda,a=e.escapeExpression,f=t!=null?t:{},l=n.helperMissing;return'<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n			<div class="network-buttons">\n				<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+"\n\n				"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'"\n\n				'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses
:t)!=null?s.facebook:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n					<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+'-icon"></span>\n					<span class="share-link-label">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.FACEBOOK"},data:i}))+'</span>\n				</span>\n				<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+"\n\n				"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'"\n\n				'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n					<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+'-icon"></span>\n					<span class="share-link-label">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.TUMBLR"},data:i}))+'</span>\n				</span>\n				<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+"\n\n				"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'"\n\n				'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n					<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+'-icon"></span>\n					<span class="share-link-label">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.TWITTER"},data:i}))+'</span>\n				</span>\n				<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+"\n\n				"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'"\n\n				'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n					<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+'-icon"></span>\n					<span class="share-link-label">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.PINTEREST"},data:i}))+'</span>\n				</span>\n				<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.className:s,t))+"\n\n				"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'"\n\n				'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n					<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.className:s,t))+'-icon"></span>\n					<span class="share-link-label">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.MAIL"},data:i}))+'</span>\n				</span>\n			</div>\n\n			<div class="link-instructions '+((s=n["if"].call(f,t!=null?t.moveInstructionsUp:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+a((o=(o=n.copyMessage||(t!=null?t.copyMessage:t))!=null?o:l,typeof o=="function"?o.call(f,{name:"copyMessage",hash:{},data:i}):o))+'\n			</div>\n\n			<div class="share-link-types first-stop '+((s=n["if"].call(f,t!=null?t.isEdge:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button '+((s=n["if"].call(f,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.GRAB_LINK"},data:i}))+"</span>\n\n"+((s=n.unless.call(f,t!=null?t.hideButtons:t,{name:"unless",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n						<span class="link-type-highlight '+((s=n["if"].call(f,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n'+((s=n["if"].call(f,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.program(46,i,0),data:i}))!=null?s:"")+'\n				</div>\n			</div>\n		</div>\n\n\n		<div class="email-sharing-panel share-panel">\n\n			<div class="message-form">\n				<div class="fake-input">\n					<input type="text" class="email-recipient-text-field" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i}))+'" data-field="recipient">\n				</div>\n\n'+((s=n["if"].call(f,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(58,i,0),inverse:e.program(60,i,0),data:i}))!=null?s:"")+'\n				<textarea class="email-message-text-field '+((s=n["if"].call(f,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(63,i,0),inverse:e.program(65,i,0),data:i}))!=null?s:"")+'" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i}))+'"></textarea>\n			</div>\n\n			<button disabled class="share-by-email mini">'+
a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.FLICKR_SHARE"},data:i}))+'</button>\n			<button class="leave-email-sharing mini alt">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"common.BACK"},data:i}))+"</button>\n\n		</div>\n\n\n	</div>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel-restyle",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" ms-edge "},3:function(e,t,n,r,i){return" single-link"},5:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,(s=t!=null?t.linkShareDisplay:t)!=null?s.embedr:s,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canShare:s,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.linkShareDisplay:t)!=null?s.bbCode:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")},6:function(e,t,n,r,i){return'								<span class="link-type-button embed-type-button">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMBED_SIMPLE"},data:i}))+"</span>\n"},8:function(e,t,n,r,i){return'							<span class="link-type-button email-type-button">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMAIL"},data:i}))+"</span>\n"},10:function(e,t,n,r,i){return'								<span class="link-type-button bbcode-type-button">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.BBCODE"},data:i}))+"</span>\n"},12:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canShare:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:""},13:function(e,t,n,r,i){return'							<span class="link-type-button email-type-button" tabindex="0" role="menuitem">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMAIL"},data:i}))+"</span>\n"},15:function(e,t,n,r,i){return" single-highlight"},17:function(e,t,n,r,i){var s,o,u=e.lambda,a=e.escapeExpression,f=t!=null?t:{},l=n.helperMissing,c="function";return'						<div class="link-type-content grab-link-only grab-link">\n							<div class="network-buttons">\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+'-icon tabbable" tabindex="0" role="link" aria-label="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.FACEBOOK"},data:i}))+'"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+'-icon tabbable" tabindex="0" role="link" aria-label="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.TUMBLR"},data:i}))+'"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+'-icon tabbable" tabindex="0" role="link" aria-label="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.TWITTER"},data:i}))+'"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+'-icon tabbable" tabindex="0" role="link" aria-label="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||l).call(f,{name:"intlHTMLMessage",hash:{intlName:"share-modal.PINTEREST"},data:i}))+'"></span>\n								</span>\n							</div>\n\n\n							<input readonly type="text" class="grab-link-text-field tabbable" value="'+a((o=(o=n.grabLink||(t!=null?t.grabLink:t))!=null?o:l,typeof o===c?o.call(f,{name:"grabLink",hash:{},data:i}):o))+'">\n\n'+((s=n["if"].call(f,t!=null?t.canHaveGuestpass:t,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop
,data:i}))!=null?s:"")+'\n							<div class="grab-link-loader '+((s=n.unless.call(f,t!=null?t.canHaveGuestpass:t,{name:"unless",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n.unless.call(f,t!=null?t.choiceOfPermission:t,{name:"unless",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder '+((s=n.unless.call(f,t!=null?t.canHaveGuestpass:t,{name:"unless",hash:{},fn:e.program(37,i,0),inverse:e.program(39,i,0),data:i}))!=null?s:"")+'">'+a((o=(o=n.privacyWarningString||(t!=null?t.privacyWarningString:t))!=null?o:l,typeof o===c?o.call(f,{name:"privacyWarningString",hash:{},data:i}):o))+"</div>\n								"+((s=n["if"].call(f,t!=null?t.showDownloadWarning:t,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</div>\n\n						</div>\n\n"+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canShare:s,{name:"if",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))!=null?s:"")},18:function(e,t,n,r,i){return" sharing-type-disabled"},20:function(e,t,n,r,i){return" sharing-type-enabled"},22:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canNotShareTitle:s,t))+'"'},24:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canNotShareTitle:s,t))+'"'},26:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canNotShareTitle:s,t))+'"'},28:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canNotShareTitle:s,t))+'"'},30:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.choiceOfPermission:t,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:""},31:function(e,t,n,r,i){var s;return'								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">'+e.escapeExpression((s=(s=n.grabLinkDefaultPermission||(t!=null?t.grabLinkDefaultPermission:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"grabLinkDefaultPermission",hash:{},data:i}):s))+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n'},33:function(e,t,n,r,i){return" no-permission-loader"},35:function(e,t,n,r,i){return"no-permission-loader"},37:function(e,t,n,r,i){return" hide-reminder"},39:function(e,t,n,r,i){return" with-guestpasses "},41:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="grab-link-download-reminder">'+a((s=(s=n.downloadAccessString||(t!=null?t.downloadAccessString:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"downloadAccessString",hash:{},data:i}):s))+" "+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{url:"/account/prefs/downloads/",intlName:"share-modal.CHANGE_DOWNLOAD_PREF"},data:i}))+"</div>"},43:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i}))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field '+((s=n["if"].call(o,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.program(46,i,0),data:i}))!=null?s:"")+'" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i}))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n'+((s=n["if"].call(o,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(49,i,0),inverse:e.program(51,i,0),data:i}))!=null?s:"")+'									<button disabled class="share-by-email">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.FLICKR_SHARE"},data:i}))+"</button>\n								</div>\n							</div>\n"},44:function(e,t,n,r,i){return"make-room-for-dropdown"},46:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:""},47:function(e,t,n,r,i){return"make-room-for-warning"},49:function(e,t,n,r,i){var s;return'									<div class="mail-perm-field">\n										<span class="mail-permission-label">'+e.escapeExpression((s=(s=n.grabLinkDefaultPermission||(t!=null?t.grabLinkDefaultPermission:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"grabLinkDefaultPermission",hash:{},data:i}):s))+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n'},51:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.noop,data:i}))!=null?s:""},52:function(e,t,n,r,i){return'											<div class="tertiary non-public-warning">'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},t!=null?t.nonPublicWarning:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"</div>\n"},54:function(e,t,n,r,i){var s,o,u=e.lambda,a=e.escapeExpression,f=t!=null?t:{},l=n.helperMissing,c="function";return'\n						<div class="link-type-content grab-link">\n\n							<div class="network-buttons">\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canShare:s,{name
:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.facebook:s)!=null?s.className:s,t))+'-icon"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.tumblr:s)!=null?s.className:s,t))+'-icon"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.twitter:s)!=null?s.className:s,t))+'-icon"></span>\n								</span>\n								<span class="share-link '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+"\n\n								"+((s=n.unless.call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canShare:s,{name:"unless",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+'"\n\n								'+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.canNotShareTitle:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n\n									<span class="share-link-icon '+a(u((s=(s=t!=null?t.networkClasses:t)!=null?s.pinterest:s)!=null?s.className:s,t))+'-icon"></span>\n								</span>\n							</div>\n							<input readonly type="text" class="grab-link-text-field" value="'+a((o=(o=n.grabLink||(t!=null?t.grabLink:t))!=null?o:l,typeof o===c?o.call(f,{name:"grabLink",hash:{},data:i}):o))+'">\n\n'+((s=n["if"].call(f,t!=null?t.canHaveGuestpass:t,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n							<div class="grab-link-loader '+((s=n.unless.call(f,t!=null?t.choiceOfPermission:t,{name:"unless",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"><div class="balls"></div></div>\n\n							<div class="grab-link-reminders">\n								<div class="grab-link-privacy-reminder '+((s=n.unless.call(f,t!=null?t.canHaveGuestpass:t,{name:"unless",hash:{},fn:e.program(37,i,0),inverse:e.program(39,i,0),data:i}))!=null?s:"")+'">'+a((o=(o=n.privacyWarningString||(t!=null?t.privacyWarningString:t))!=null?o:l,typeof o===c?o.call(f,{name:"privacyWarningString",hash:{},data:i}):o))+"</div>\n								"+((s=n["if"].call(f,t!=null?t.showDownloadWarning:t,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</div>\n\n						</div>\n\n"+((s=n["if"].call(f,(s=t!=null?t.linkShareDisplay:t)!=null?s.embedr:s,{name:"if",hash:{},fn:e.program(55,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(f,(s=(s=t!=null?t.networkClasses:t)!=null?s.flickr:s)!=null?s.canShare:s,{name:"if",hash:{},fn:e.program(68,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(f,(s=t!=null?t.linkShareDisplay:t)!=null?s.bbCode:s,{name:"if",hash:{},fn:e.program(70,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},55:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'							<div class="link-type-content html-embed">\n'+((s=n["if"].call(u,(s=t!=null?t.linkShareDisplay:t)!=null?s.isNonPublic:s,{name:"if",hash:{},fn:e.program(56,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n								<div class="embed-options-container '+((s=n["if"].call(u,(s=t!=null?t.linkShareDisplay:t)!=null?s.isNonPublic:s,{name:"if",hash:{},fn:e.program(58,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n									<input readonly type="text" class="embed-code-text-field" value="'+f((o=(o=n.defaultEmbedrCode||(t!=null?t.defaultEmbedrCode:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"defaultEmbedrCode",hash:{},data:i}):o))+'">\n\n									<div class="embed-demo-container '+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.displayOptions:t)!=null?s.header:s,"===","true",{name:"ifCond",hash:{},fn:e.program(60,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.displayOptions:t)!=null?s.footer:s,"===","true",{name:"ifCond",hash:{},fn:e.program(62,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n										<div class="embed-demo">\n										</div>\n									</div>\n\n									<div class="embed-options">\n										<div class="radio">\n											<input type="checkbox" data-setting="header" id="embedr-option-header" name="radio" '+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.displayOptions:t)!=null?s.header:s,"===","true",{name:"ifCond",hash:{},fn:e.program(64,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n											<label for="embedr-option-header">\n												<div class="square"></div>\n												<span>'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMBEDR_OPTION_HEADER"},data:i}))+'</span>\n											</label>\n										</div>\n\n										<div class="radio">\n											<input type="checkbox" data-setting="footer" id="embedr-option-footer" name="radio" '+
((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.displayOptions:t)!=null?s.footer:s,"===","true",{name:"ifCond",hash:{},fn:e.program(64,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n											<label for="embedr-option-footer">\n												<div class="square"></div>\n												<span>'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMBEDR_OPTION_FOOTER"},data:i}))+"</span>\n											</label>\n										</div>\n\n"+((s=n.unless.call(u,t!=null?t.showSlideshowOption:t,{name:"unless",hash:{},fn:e.program(66,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n										<div class="embed-code-size-field embed-size-field">\n											<span class="embed-code-label">\n											'+f((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||a).call(u,t!=null?t.defaultSizeStr:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n											</span>\n											<span class="dropdown-arrow"></span>\n										</div>\n									</div> <!-- embed options-->\n								</div>\n\n\n							</div>\n'},56:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'									<div class="embed-privacy-container">\n										<p>'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"share-modal.EMBEDR_CHANGE_PRIVACY_WARNING"},data:i}))+'</p>\n										<div class="privacy-tut-img"></div>\n\n										<label for="embed-with-guestpass">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"share-modal.EMBED_WITH_GUESTPASS"},data:i}))+' [<a class="server-only-link" target="_blank" href="/help/sharing/">?</a>]</label>\n										<input class="embed-guestpass-checkbox" type="checkbox" name="embed-with-guestpass"></input>\n									</div>\n'},58:function(e,t,n,r,i){return"hide"},60:function(e,t,n,r,i){return"show-header"},62:function(e,t,n,r,i){return"show-footer"},64:function(e,t,n,r,i){return'checked="true"'},66:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'										<div class="radio">\n											<input type="checkbox" data-setting="context" id="embedr-option-context" name="radio" '+((s=(n.ifCond||t&&t.ifCond||u).call(o,(s=t!=null?t.displayOptions:t)!=null?s.context:s,"===","true",{name:"ifCond",hash:{},fn:e.program(64,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n											<label for="embedr-option-context">\n												<div class="square"></div>\n												<span>'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.EMBEDR_OPTION_SLIDESHOW"},data:i}))+"</span>\n											</label>\n										</div>\n"},68:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'							<div class="link-type-content email-sharing-panel">\n								<div class="message-form">\n									<div class="fake-input">\n										<input type="text" class="email-recipient-text-field" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i}))+'" data-field="recipient">\n									</div>\n\n									<textarea class="email-message-text-field '+((s=n["if"].call(o,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.program(46,i,0),data:i}))!=null?s:"")+'" placeholder="'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i}))+'"></textarea>\n								</div>\n\n								<div class="button-bar">\n'+((s=n["if"].call(o,t!=null?t.showMailPerms:t,{name:"if",hash:{},fn:e.program(49,i,0),inverse:e.program(51,i,0),data:i}))!=null?s:"")+'\n									<button disabled class="share-by-email">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.FLICKR_SHARE"},data:i}))+"</button>\n								</div>\n							</div>\n"},70:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'							<div class="link-type-content html-bb-embed">\n								<input readonly type="text" class="bb-code-text-field" value="'+a((s=(s=n.defaultBBCode||(t!=null?t.defaultBBCode:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"defaultBBCode",hash:{},data:i}):s))+'">\n								<div class="bb-code-size-field embed-size-field">\n									<span class="embed-code-label">\n										'+a((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.defaultBBCodeSizeStr:t,{name:"renderTrustedMarkup",hash:{},data:i}))+'\n									</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n							</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n\n			<div class="share-link-types first-stop '+((s=n["if"].call(o,t!=null?t.isEdge:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n\n					<div class="link-type-buttons" role="navigation">\n\n						<span class="link-type-button link-grab-type-button '+((s=n["if"].call(o,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" tabindex="0" role="menuitem">'+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(o,{name:"intlHTMLMessage",hash:{intlName:"share-modal.SHARE"},data:i}))+"</span>\n\n"+((s=n.unless.call(o,t!=null?t.hideButtons:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n						<span class="link-type-highlight '+((s=n["if"].call(o,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n'+((s=n["if"].call(o,t!=null?t.hideButtons:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.program(54,i
,0),data:i}))!=null?s:"")+"\n				</div>\n			</div>\n\n		</div>\n\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel-restyle",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" html"},3:function(e,t,n,r,i){return" subview-droparound"},5:function(e,t,n,r,i){return" menu"},7:function(e,t,n,r,i){return" auto-size"},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return"max-height: "+f((s=(s=n.staticHeight||(t!=null?t.staticHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"staticHeight",hash:{},data:i}):s))+"px; min-height: "+f((s=(s=n.staticHeight||(t!=null?t.staticHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"staticHeight",hash:{},data:i}):s))+"px; "},11:function(e,t,n,r,i){var s;return"width: "+e.escapeExpression((s=(s=n.staticWidth||(t!=null?t.staticWidth:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"staticWidth",hash:{},data:i}):s))+"px;"},13:function(e,t,n,r,i){return"position: fixed;"},15:function(e,t,n,r,i){return"hide-head"},17:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing;return'			<div class="content text-only'+((s=n["if"].call(u,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||a).call(u,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((o=(o=n.textMessage||(t!=null?t.textMessage:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"textMessage",hash:{},data:i}):o))+"\n			</div>\n"},18:function(e,t,n,r,i){var s;return"padding: "+e.escapeExpression((s=(s=n.contentPadding||(t!=null?t.contentPadding:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"contentPadding",hash:{},data:i}):s))+"px;"},20:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'			<div class="content html-only'+((s=n["if"].call(o,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||u).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				'+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||u).call(o,t!=null?t.htmlMessage:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n			</div>\n"},22:function(e,t,n,r,i){var s,o=t!=null?t:{};return'			<div class="content subview'+((s=n["if"].call(o,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="'+((s=(n.ifDefined||t&&t.ifDefined||n.helperMissing).call(o,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></div>\n'},24:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{};return'			<div class="content menu" style="'+((u=(n.ifDefined||t&&t.ifDefined||n.helperMissing).call(a,t!=null?t.contentPadding:t,{name:"ifDefined",hash:{},fn:e.program(18,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n				<ul role="menu">\n'+((u=n.each.call(a,t!=null?t.menuItems:t,{name:"each",hash:{},fn:e.program(25,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"				</ul>\n			</div>\n"},25:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},o[1]!=null?o[1].multiSelect:o[1],{name:"if",hash:{},fn:e.program(26,i,0,s,o),inverse:e.program(31,i,0,s,o),data:i}))!=null?u:""},26:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'							<li role="menuitem" '+((s=n["if"].call(u,t!=null?t.selected:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n								<span class="selection"></span>\n								'+e.escapeExpression((o=(o=n.text||(t!=null?t.text:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"text",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.itemFlag:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</li>\n"},27:function(e,t,n,r,i){return'class="selected"'},29:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return" - "+f((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:u,typeof s===a?s.call(o,{name:"itemFlag",hash:{},data:i}):s))+'<div class="label-new">'+f((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:u,typeof s===a?s.call(o,{name:"itemFlag",hash:{},data:i}):s))+"</div>"},31:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'							<li role="menuitem" '+((s=n["if"].call(u,t!=null?t.isSelected:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(34,i,0),data:i}))!=null?s:"")+">\n								"+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n									"+e.escapeExpression((o=(o=n.text||(t!=null?t.text:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"text",hash:{},data:i}):o))+((s=n["if"].call(u,t!=null?t.itemFlag:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n								"+((s=n["if"].call(u,t!=null?t.href:t,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n							</li>\n"},32:function(e,t,n,r,i){return'class="selected-item"'},34:function(e,t,n,r,i){return'tabindex="0"'},36:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'<a href="'+e.escapeExpression((o=(o=n.href||(t!=null?t.href:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"href",hash:{},data:i}):o))+'"'+((s=n["if"].call(u,t!=null?t.className:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"},37:function(e,t,n,r,i){var s;return' class="'+e.escapeExpression((s=(s=n.className||(t!=null?t.className:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"className",hash:{},data:i}):s))+'"'},39:function(e,t,n,r,i){var s;return'<div class="label-new">'+e.escapeExpression((s=(s=n.itemFlag||(t!=null?t.itemFlag:t))!=null?s:n.helperMissing
,typeof s=="function"?s.call(t!=null?t:{},{name:"itemFlag",hash:{},data:i}):s))+"</div>"},41:function(e,t,n,r,i){return"</a>"},43:function(e,t,n,r,i){return"hide-foot"},45:function(e,t,n,r,i){return'		<div class="droparrow up"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i,s,o){var u,a,f=t!=null?t:{},l=n.helperMissing,c="function",h=e.escapeExpression;return'<div class="droparound'+((u=n["if"].call(f,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(1,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(3,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.menuItems:t,{name:"if",hash:{},fn:e.program(5,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.autoSizeToContent:t,{name:"if",hash:{},fn:e.program(7,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+" "+h((a=(a=n.classList||(t!=null?t.classList:t))!=null?a:l,typeof a===c?a.call(f,{name:"classList",hash:{},data:i}):a))+'"\nstyle="'+((u=n["if"].call(f,t!=null?t.staticHeight:t,{name:"if",hash:{},fn:e.program(9,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"\n"+((u=n["if"].call(f,t!=null?t.staticWidth:t,{name:"if",hash:{},fn:e.program(11,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"\n"+((u=n["if"].call(f,t!=null?t.positionFixed:t,{name:"if",hash:{},fn:e.program(13,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n	<div class="head '+((u=n.unless.call(f,t!=null?t.headContent:t,{name:"unless",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n		'+h((a=(a=n.headContent||(t!=null?t.headContent:t))!=null?a:l,typeof a===c?a.call(f,{name:"headContent",hash:{},data:i}):a))+'\n	</div>\n	<div class="body">\n'+((u=n["if"].call(f,t!=null?t.textMessage:t,{name:"if",hash:{},fn:e.program(17,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.htmlMessage:t,{name:"if",hash:{},fn:e.program(20,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.subview:t,{name:"if",hash:{},fn:e.program(22,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+((u=n["if"].call(f,t!=null?t.menuItems:t,{name:"if",hash:{},fn:e.program(24,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'	</div>\n	<div class="foot '+((u=n.unless.call(f,t!=null?t.footContent:t,{name:"unless",hash:{},fn:e.program(43,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">\n		'+h((a=(a=n.footContent||(t!=null?t.footContent:t))!=null?a:l,typeof a===c?a.call(f,{name:"footContent",hash:{},data:i}):a))+"\n	</div>\n"+((u=n["if"].call(f,t!=null?t.showDropArrow:t,{name:"if",hash:{},fn:e.program(45,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"</div>\n"},useData:!0,useDepths:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-droparound-view",function(e,t){"use strict";var n=require("hermes-core/flog")(t),r,i,s;r={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},i={supportsTransform:!1,droparound:{height:0,width:0}},s=function(e,t,n){var r=e.x,i=e.y,s=e.width,o=e.height,u=e.viewportX,a=t.width,f=t.height,l=n.height,c=n.width,h=n.preferredHorizontalOrientation,p=n.preferredVerticalOrientation,d,v,m,g,y,b=a/2,w=f/2,E=i<w,S=r<b;return p==="down"&&(E=!0),p==="up"&&(E=!1),h==="right"&&(S=!0),h==="left"&&(S=!1),n.ignoreBoundary||(l>u&&(E=!0),i+o+l<u&&(E=!1)),E?(g=i+o,y=i+o+l,d={vertical:"down"},S?(v=r,m=r+c,d.horizontal="right"):(v=r-c+s,m=r-s,d.horizontal="left")):(g=i-l,y=i,d={vertical:"up"},S?(v=r,m=r+c,d.horizontal="right"):(v=r-c+s,m=r-s,d.horizontal="left")),{coords:[v,m,g,y],orientation:d}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(n.warn("requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerWithTemplate("fluid-droparound",{textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent"),contentPadding:this.get("contentPadding")}),this.appendAndPosition(),this)},activate:function(){var t=this.get("container"),n=this;e.OverlayManager.DroparoundOverlay.add(this),e.OverlayManager.DroparoundOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList"),hideModalOverlay:this.get("hideModalOverlay"),invisibleOverlay:this.get("invisibleOverlay")}),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;n.close(e)})),e.use("keyboard-manager",function(e){n.registerEventHandler(t.on("keydown",n.keyboardNavigation,n))});var i=this.get("anchorElement"),s=this.get("keyboardAnchorElement");return s||(s=i.hasAttribute("aria-haspopup")?i:i.ancestor("[aria-haspopup=true]")),s&&(this.set("keyboardAnchorElement",s),this.get("keyboardAnchorElement").setAttribute("aria-expanded","true"),this.registerEventHandler(s.on("key",this.enterDroparound,"down:40",this))),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(t.one(r.css.menuContent).delegate(["click","keydown"],function(e){(e.type==="click"||e.keyCode===13)&&this.onMenuItemClick(e)}.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},enterDroparound:function(e){var t=this.get("container").one("ul li");t&&(e.preventDefault(),t.focus())},keyboardNavigation:function(e){var t=e.keyCode,n=t===38||t===9&&e.shiftKey,r=t===40||t===9&&!e.shiftKey,i=e.target.ancestor("li",!0);if(this.appContext.getKeyboardManager().inputHasFocus())return;if(n&&i&&i.previous("li"))e.preventDefault(),this.focusOnPreviousItem(e);else if(r)e.preventDefault(),i&&i.next("li")&&this.focusOnNextItem(e);else if(t===27||n){e.preventDefault();var s=this.get("keyboardAnchorElement");s&&(this.close(),s.focus(),s.removeClass("no-outline"))}},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.previous("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var n=t.next("li");n&&(n.one("a")?n.one("a").focus():n.focus())}},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(r.css.droparoundContainer):null},loadSubview:function(){var t,n,i=!1,s=this.get("subview"),o=this;t=this.get("container").one(r.css.subviewContent),t.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),n=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(n),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(t){var n=this,i=this.get("container").one(r.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(t.get("container")),t.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&n.fire.apply(n,e.details)}),t.normalizedActivate(),t.recursivelyActivateSubviews(),n.appendAndPosition(),n.registerEventHandler(n.get("subview").on("actionClick",e.bind(n.handleAction,n)))},onMenuItemClick:function(e){var t,n,i;t=e.target.ancestor("li",!0),t&&(n=this.get("container").one(r.css.menuContent).all("li").indexOf(t),n!==-1&&(i=this.get("menuItems")[n],this.get("multiSelect")&&(i.selected=!i.selected,t.toggleClass("selected")),this.fire("selected",{menuItemIndex:n,menuItem:i,origEvent:e})))},appendAndPosition:function(t){var n=e.one(r.css.destinationContainer),s=this.get("container").one(r.css.droparoundContainer);n&&(n.append(this.get("container")),i.droparound.width=this.get("width")||s.getComputedStyle("width"),i.droparound
.height=this.get("height")||s.getComputedStyle("height"),this.repositionToElement(t||this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,(r+this.get("closeOnScrollDistance")<n||r-this.get("closeOnScrollDistance")>n)&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(e,t){var n=this.get("container"),i=this.get("positionFixed"),o=n.one(".droparound"),u=this.get("showDropArrow")?o.one(r.css.droparrow):undefined,a=o.one(r.css.droparoundContent),f=a.get("offsetWidth"),l=a.get("offsetHeight"),c,h=u?u.get("offsetHeight"):0,p=e.getXY(),d=p[0],v=p[1],m=e.getDOMNode().getBoundingClientRect(),g={width:o.get("offsetWidth"),height:o.get("offsetHeight")};g.ignoreBoundary=!!t,this.get("preferLeft")&&(g.preferredHorizontalOrientation="left"),this.get("preferRight")&&(g.preferredHorizontalOrientation="right"),this.get("preferTop")&&(g.preferredVerticalOrientation="up"),this.get("preferBottom")&&(g.preferredVerticalOrientation="down");if(!this.anchorCoords||this.x!==0&&this.y!==0)this.anchorCoords={x:i?m.left:d,y:i?m.top:v,width:e.get("offsetWidth"),height:e.get("offsetHeight"),viewportX:e.getDOMNode().getBoundingClientRect().top||0};var y=s(this.anchorCoords,{width:this.appContext.viewportData.getWidth(),height:this.appContext.viewportData.getHeight()},g);y.orientation.vertical==="down"?y.coords[2]+=h-this.get("anchorOffsetVertical"):y.coords[2]-=h+this.get("anchorOffsetVertical"),y.orientation.horizontal==="right"?y.coords[0]-=this.get("anchorOffsetHorizontal"):y.coords[0]+=this.get("anchorOffsetHorizontal"),o.setStyles({left:y.coords[0],top:y.coords[2]}),u&&(u.removeClass("down").removeClass("up").removeClass("left").removeClass("right").addClass(y.orientation.vertical),y.orientation.horizontal==="left"?u.setStyles({right:10+this.get("mirrorArrowAdjustment"),left:"auto"}):u.setStyles({left:10+this.get("mirrorArrowAdjustment")})),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(c={width:f+"px",height:l+"px"},a.setStyles(c))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0;var n=this.get("keyboardAnchorElement");n&&(n.setAttribute("aria-expanded","false"),n.focus(),n.addClass("no-outline")),this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},keyboardAnchorElement:{value:null},showDropArrow:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:undefined,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(
t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferRight:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},forceRight:{value:null},autoSizeToContent:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-droparound","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("hermes-template-fluid-share-embedr-code",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return((s=(n.ifCond||t&&t.ifCond||u).call(o,(s=t!=null?t.displayOptions:t)!=null?s.header:s,"===","true",{name:"ifCond",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||u).call(o,(s=t!=null?t.displayOptions:t)!=null?s.footer:s,"===","true",{name:"ifCond",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.showSlideshowOption:t,{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")},2:function(e,t,n,r,i){return'data-header="true" '},4:function(e,t,n,r,i){return'data-footer="true" '},6:function(e,t,n,r,i){var s;return(s=(n.ifCond||t&&t.ifCond||n.helperMissing).call(t!=null?t:{},(s=t!=null?t.displayOptions:t)!=null?s.context:s,"===","true",{name:"ifCond",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:""},7:function(e,t,n,r,i){return'data-context="true" '},9:function(e,t,n,r,i){return'data-vr="true" '},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<a data-flickr-embed="true" '+((s=(n.isFlipped||t&&t.isFlipped||a).call(u,"enable-share-restyle",{name:"isFlipped",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.displayOptions:t)!=null?s.vr:s,"===","true",{name:"ifCond",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+' href="'+l((o=(o=n.embedLink||(t!=null?t.embedLink:t))!=null?o:a,typeof o===f?o.call(u,{name:"embedLink",hash:{},data:i}):o))+'" title="'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+'"><img src="'+l((o=(o=n.farmURL||(t!=null?t.farmURL:t))!=null?o:a,typeof o===f?o.call(u,{name:"farmURL",hash:{},data:i}):o))+'" width="'+l((o=(o=n.width||(t!=null?t.width:t))!=null?o:a,typeof o===f?o.call(u,{name:"width",hash:{},data:i}):o))+'" height="'+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+'" alt="'+l((o=(o=n.alt||(t!=null?t.alt:t))!=null?o:a,typeof o===f?o.call(u,{name:"alt",hash:{},data:i}):o))+'"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-bb-code",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return"by [url="+((s=n["if"].call(u,t!=null?t.authorURL:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:"")+"]"+e.escapeExpression((o=(o=n.authorName||(t!=null?t.authorName:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"authorName",hash:{},data:i}):o))+"[/url]"},2:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n.authorURL||(t!=null?t.authorURL:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"authorURL",hash:{},data:i}):s))},4:function(e,t,n,r,i){return"shortURL"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return"[url="+l((o=(o=n.shortURL||(t!=null?t.shortURL:t))!=null?o:a,typeof o===f?o.call(u,{name:"shortURL",hash:{},data:i}):o))+"][img]"+l((o=(o=n.farmURL||(t!=null?t.farmURL:t))!=null?o:a,typeof o===f?o.call(u,{name:"farmURL",hash:{},data:i}):o))+"[/img][/url][url="+l((o=(o=n.shortURL||(t!=null?t.shortURL:t))!=null?o:a,typeof o===f?o.call(u,{name:"shortURL",hash:{},data:i}):o))+"]"+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+"[/url] "+((s=n["if"].call(u,t!=null?t.authorName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+", "+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"share-modal.ON_FLICKR"},data:i}))},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-bb-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-share-modal-mail-pill",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'<div class="pill" title="'+u((n.stripTags||t&&t.stripTags||o).call(s,t!=null?t.value:t,{name:"stripTags",hash:{},data:i}))+'">\n	<span>'+u((n.stripTags||t&&t.stripTags||o).call(s,t!=null?t.value:t,{name:"stripTags",hash:{},data:i}))+'</span>\n	<span class="remove-tag">\n		<i class="delete-tag" title="Delete"></i>\n	</span>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/share-modal-mail-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-warning",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))},3:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.OOPS"},data:i}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<div class="fluid-warning">\n	<span class="warning-title">'+((s=n["if"].call(u,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'</span>\n	<br/><br/>\n	<span class="warning-message">'+f((o=(o=n.message||(t!=null?t.message:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"message",hash:{},data:i}):o))+'</span>\n	<button class="button">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.OK"},data:i}))+"</button>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-warning",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel-error",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="share-panel-body cancel-share">\n	<div class="cancel-message">\n		'+a((s=(s=n.errorMessage||(t!=null?t.errorMessage:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"errorMessage",hash:{},data:i}):s))+'\n	</div>\n\n	<button class="done-sharing mini">'+a((n.intlHTMLMessage||t&&t.intlHTMLMessage||u).call(o,{name:"intlHTMLMessage",hash:{intlName:"common.CANCEL"},data:i}))+"</button>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel-error",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-old-html-embed-code",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<a href="'+f((s=(s=n.embedLink||(t!=null?t.embedLink:t))!=null?s:u,typeof s===a?s.call(o,{name:"embedLink",hash:{},data:i}):s))+'" title="'+f((s=(s=n.title||(t!=null?t.title:t))!=null?s:u,typeof s===a?s.call(o,{name:"title",hash:{},data:i}):s))+" by "+f((s=(s=n.authorName||(t!=null?t.authorName:t))!=null?s:u,typeof s===a?s.call(o,{name:"authorName",hash:{},data:i}):s))+", "+f((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"share-modal.ON_FLICKR"},data:i}))+'"><img src="'+f((s=(s=n.farmURL||(t!=null?t.farmURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"farmURL",hash:{},data:i}):s))+'" width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" alt="'+f((s=(s=n.alt||(t!=null?t.alt:t))!=null?s:u,typeof s===a?s.call(o,{name:"alt",hash:{},data:i}):s))+'"></a>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-old-html-embed-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-old-iframe-embed-code",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<iframe src="'+f((s=(s=n.embedLink||(t!=null?t.embedLink:t))!=null?s:u,typeof s===a?s.call(o,{name:"embedLink",hash:{},data:i}):s))+'" width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-old-iframe-embed-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,i={transitionTimeout:2e3},s={getPrefixedStyleProperty:{}},o={};t=e.flutil={xbrowser:{transition:{property:"transitionProperty",duration:"transitionDuration",transitionEndEvent:"transitionend"}},setStylePrefixed:function(t,n,r){var i=this.getPrefixedStyleProperty(t);return e.Array.each(i,function(e){r.setStyle(e,n)}),r},getPrefixedStyleProperty:function(t){if(s.getPrefixedStyleProperty[t])return s.getPrefixedStyleProperty[t];var n=[],r=["-webkit-","-moz-","-ms-",""];return e.Array.each(r,function(e){n.push(e+t)}),s.getPrefixedStyleProperty[t]=n,n},dump:function(){var e=new Array(arguments.length),t;for(var n=0;n<e.length;++n)e[n]=arguments[n];t=typeof e[0]=="string"?e.shift():"LOG",e.unshift("color: #FC0"),e.unshift("%c["+t+"]"),console.log.apply(console,e)},extend:function(e){e||(e={});var t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n];return Array.prototype.slice.call(t,1).forEach(function(t){if(!t)return;for(var n in t)e[n]=t[n]}),e},objectCreate:function(e,n){var r,i;return r=function(){},r.prototype=e,i=new r,n?t.extend(i,n):i},result:function(t){return e.Lang.isFunction(t)?t():t},onTransitionEnd:function(e,r){if(!r||typeof r!="function")return;var s,o,u,a;e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.property],a=n.getComputedStyle(e)[t.xbrowser.transition.duration];if(!u||!a)return r();o=function(){clearTimeout(s),e.removeEventListener(t.xbrowser.transition.transitionEndEvent,o),r()},s=setTimeout(o,i.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionEndEvent,o)},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},setCookie:function(t){if(!t.cookieName||typeof t.cookieValue=="undefined"||!t.path)throw new Error("[flutil.setCookie] Missing important parameters to set a cookie");var n=t.cookieName,r=t.cookieValue,i=t.domain||".flickr.com",s=t.path,o=t.expiresMonthsFromNow||3,u=e.Lang.isNumber(t.expires)?t.expires:e.moment().add(o,"months").toDate();t.remove&&e.Cookie.remove(n,{path:s}),e.Cookie.set(n,r,{domain:i,path:s,expires:u})},createFragment:function(e){var t=r.createElement("div"),n=r.createDocumentFragment(),i;t.innerHTML=e;while(i=t.firstChild)n.appendChild(i);return n},constrainToValues:function(e,t){if(!t)throw new Error("Must supply list to constrain to values.");return!e||typeof e!="string"?t[0]:t.indexOf(e)<0?t[0]:e},escapeInput:function(e,t){var n;if(!r)return e;if(!e&&typeof e!="number")return"";t||(t="text");if(t==="html")return n=r.createElement("div"),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="text")return n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/ig," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML;if(t==="numericstring")return(e+"").replace(/[^\d]/,"")},disableEvent:function(n,r){r=e.merge({excepted:":not(*)",onDisabledEvent:null},r);if(!document.body.addEventListener)return;o[n]=o[n]||{},o[n][r.excepted]&&t.enableEvent(n,r.excepted),o[n][r.excepted]=function(t){if(!r.excepted||!e.one(t.target).ancestors(r.excepted,!0).isEmpty())return;t.preventDefault(),t.stopPropagation(),r.onDisabledEvent&&r.onDisabledEvent(t)},document.body.addEventListener(n,o[n][r.excepted],!0)},enableEvent:function(t,n){n=e.merge({excepted:":not(*)"},n);if(!o[t]||!o[t][n.excepted])return;document.body.removeEventListener(t,o[t][n.excepted],!0),o[t][n.excepted]=null},unescape:function(t){if(!t||!e.Lang.isString(t))return t;var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#39;":"'","&#92;":"\\"};return t.replace(/(&amp;|&lt;|&gt;|&quot;|&#x27;|&#39;|&#92;)/ig,function(e){return n[e.toLowerCase()]})},normalizeURIComponents:function(e){var t,n,r,i;t={"&":["&amp;","&#x00026;","&#38;"],"<":["&lt;","&#x0003C;","&#60;"],">":["&gt;","&#x0003E;","&#62;"],'"':["&quot;","&#x00022;","&#34;"],"'":["&apos;","&#x00027;","&#39;"],"`":["&grave;","&DiacriticalGrave;","&#x00060;","&#96;"]},e=e.replace(/\+/g," ");for(n in t)r=n,i=t[n],e=e.replace(new RegExp(i.join("|"),"gi"),r);return e=decodeURIComponent(e),e},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r=n.split(/=/),i;return i=r[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t),i!==undefined&&i!==null?i+"":r[1]||""}).trim()},createHashCode:function(e){var t,n="0000000000";return typeof e!="object"?t=e+"":t=Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(r){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0).toString().replace(/^-/,""),n.slice(0,-1*t.length)+t},camelCaseifyKeys:function(e){return Object.keys(e).reduce(function(n,r){return n[t.camelCaseify(r)]=e[r],n},{})},camelCaseify:function(e){return e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})},unCamelCaseify:function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^-/,"")},unicodeVariants:["(?:ae|\u00e6)","(?:oe|\u0153)","(?:ss|\u00df)","(?:th|\u00de)","[a\u00e1\u00e0\u00e2\u00e4\u00e3a\u00e5\u1ea5]","[e\u00e9\u00e8\u00ea\u00eb\u011b3]","[i\u00ed\u00ec\u00ee\u00ef\u01d0]","[o\u00f3\u00f2\u00f4\u00f6\u00f5\u01d2\u1ecf\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\u00f8]","[u\u00fa\u00f9\u00fb\u00fc\u01d4\u01da\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1]","[y\u00fd\u00ff]","[c\u00e7\u010d]","[d\u00d0]","[f\u0192]","[g\u01e7]","[h\u021f]","[j\u01f0]","[k\u01e9]","[l\u013e]","[n\u00f1\u0148]","[r\u0159\u00ae]","[s\u0161\u1e67]","[t\u0165]","[z\u017e]"],agnosticizeUnicode:function(e){var t=this.unicodeVariants,n=t.length,r;for(r=0;r<n;r++)e=e.replace(new RegExp(t[r],"gi"),t[r]);return e},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},formatNumbers:function(e){return Math.floor(e/1e6)>0?e=Math.floor(e/1e5)/10+"M":Math.floor(e/1e3)>0?e=Math.floor(e/100)/10+"K":e},formatIntlPluralNumber:function(t,n,r){var i=e.flutil.formatNumbers(n);return r?t.replace(/(?:\d*[,\.]\d+)+/
,i):t.replace(/(?:\d*[,\.\s]\d+)+/,i)},openPopupWindow:function(t,n){var r,i,s,o,u,a;if(typeof window=="undefined")return;i=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),s=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0),s.top||(s.top=Math.floor((i.screen.height-s.height)/2)),s.left||(s.left=Math.floor((i.screen.width-s.width)/2)),r=Object.keys(s).map(function(e){var t=s[e];return typeof t=="boolean"&&(t=t?"yes":"no"),e+"="+t}).join(","),i=i.open(t,n.name,r),i.focus();if(n.onUrlChange||n.onClose)o="_start_",a=setInterval(function(){if(!i.location){clearInterval(a),n.onClose&&n.onClose();return}try{u=i.location.href||"x-origin"}catch(t){i.postMessage("",e.url())}if(u===o)return;o=u,n.onUrlChange&&n.onUrlChange(u)},1e3);return i},parseYYYYMMDDDatestamp:function(t){return!e.Lang.isString(t)||t.length!==8?null:Date.parse(t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2))},photoCoords:{normalize:function(e,t,n,r){return{x:e/500,y:t/375,w:n/500,h:r/375}},denormalize:function(e){return{x:e.x*500,y:e.y*375,w:e.w*500,h:e.h*375}},denormX:function(e){return e.x*500},denormY:function(e){return e.y*375},denormW:function(e){return e.w*500},denormH:function(e){return e.h*375}},getGroupsOptoutValues:function(t){var n=[];return t["rebootify-group-members"]===!0&&n.push({name:"groups_members_opt",value:0}),t["enable-groups-discussion-optout"]===!0&&n.push({name:"groups_discuss_opt",value:0}),t["enable-groups-optout"]===!0&&n.push({name:"groups_opt",value:0}),{url:e.url("/help/forum/en-us/72157645851675914/lastpage#reply"),flippers:n}},nonLockingSynchronousLoop:function(e,t,n,r){var i=0,s,o=!0,u=Object.keys(e),a=function(e){t(e),i++,i>=f?n():i===s||o?(i===s&&(s+=r.threshold),o=!1,setTimeout(function(){a(u[i])},1)):a(u[i])},f=u.length;r=r||{},r.threshold=r.threshold||1e3,s=r.threshold,o=r.earlyUnlock!==!1,a(u[i])}}},"@VERSION@",{requires:["url"]});
YUI.add("flickr-contacts-getListfetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1];return r.contacts&&r.contacts.contact&&r.contacts.contact.forEach(function(t){i.addOrUpdate(e.APIHelper.response.parsePerson(t))}),r}function r(n,r){var i=this;return n.extras=(n.extras||"")+", icon_urls, paid_products",e.Promise.all([r.callAPI("flickr.contacts.getList",n),r.getModelRegistry("person-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-contacts-getList"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models"]});
YUI.add("contact-search-box",function(e){var t,n=function(n){this.options=n,this.options.elValue=this.options.elValue||"value",this.options.hideInitially||[],this._contacts=null,this.queryEl=this.options.el,this.queryElEvent,this.listEl=null,t=this.options.DOMContainer||e.config.win,this.init()};n.prototype={langBundles:this.details.langBundles,init:function(){var t=this;this.options.showFollowingState!==!1&&(this.options.showFollowingState=!0);if(!this.queryEl)throw new Error("Need this.queryEl.");this.queryEl.on("keydown",this.keynav.bind(this)),this.queryElEvent=this.queryEl.on("keyup",this.search.bind(this)),this.wrapperEl=e.Node.create("<div/>"),this.wrapperEl.addClass("c-contact-search-autocomplete"),this.listEl=e.Node.create("<ul/>"),this.listEl.addClass("contact-list"),this.wrapperEl.appendChild(this.listEl),this.listEl.on("mouseover",function(e){var n=e.target.ancestor("li",!0);if(!n||n===t.highlighted)return;t._highlight(n)}),this.queryEl.ancestor().insertBefore(this.wrapperEl,this.queryEl),this.wrapperEl.appendChild(this.queryEl),this.options.clickContact=this.options.clickContact||function(e){var n=e.target.ancestor("[data-nsid]",!0),r=n?n.getData("nsid"):"";t.select(r)},this.listEl.delegate("click",this.options.clickContact,"li"),this.selectedIndex=0},keynav:function(e){e.keyCode===38?(e.preventDefault(),this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.numShowing+this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):e.keyCode===40?(e.preventDefault(),this.selectedIndex++,this.selectedIndex>this.numShowing-1&&(this.selectedIndex=this.numShowing-this.selectedIndex),this._highlight(this.selectedIndex),this._scrollToNode(this.highlighted)):e.keyCode===9?this._visible&&this.highlighted&&(e.preventDefault(),this.select(this.highlighted.getData("nsid"))):e.keyCode===13&&this._visible&&this.highlighted&&(e.preventDefault(),!e.target.ancestor(".share-view",!0)&&!e.target.ancestor(".fluid-share-panel-view",!0)?this.options.clickContact(e,this.highlighted):this.select(this.highlighted.getData("nsid")))},_highlight:function(t){var n=this.listEl.all("li"),r=t instanceof e.Node,i=r?t:n.item(t),s=r?n.indexOf(t):t;i&&!i.hasClass("loading")&&!i.hasClass("no-members")&&(n.removeClass("highlight"),i.addClass("highlight"),this.selectedIndex=s,this.highlighted=i)},_scrollToNode:function(e){var t=this.listEl.get("scrollTop"),n=t+this.listEl.get("clientHeight"),r=e.get("offsetTop"),i=r+e.get("clientHeight"),s=5;t>r?this.listEl.set("scrollTop",r-s):n<i&&this.listEl.set("scrollTop",i-this.listEl.get("clientHeight")+s)},getContact:function(e){var t=0,n=this._contacts,r=n.length;for(;t<r;t++)if(n[t].nsid===e&&!n[t].hide)return n[t]},hideFromSearch:function(e){e=e.trim(),this._contacts&&this._contacts.some(function(t){if(t.nsid.trim()===e)return t.hide=!0,!0})},resetSearch:function(){this._contacts&&this._contacts.forEach(function(e){e.hide=!1})},showInSearch:function(e){e=e.trim(),this._contacts&&this._contacts.some(function(t){if(t.nsid.trim()===e)return t.hide=!1,!0})},load:function(e){var t={},n=this,r,i;if(this._busy)return;return this._end=!1,this._busy=!0,t.can_tag=this.options.canTag||0,i=this.options.appContext.getViewer().nsid,r=this.options.appContext.getModel("contacts-models",i),r.then(function(r){return t.page=1,t.perPage=3e3,t.per_page=3e3,n._loadMoreContacts(r,t,e)},function(){n._busy=!1,n.options.onError()})},_loadMoreContacts:function(e,t,n){var r=this;return this._busy=!0,r.options.loadingState&&!r.listEl.one("li.loading")&&r.appendLoader(),e.getValue("contacts").getPage(t).then(function(i){r._contacts=(r.processContactModels(i,!0,!0)||[]).concat(r._contacts||[]),n(),(!r._contacts||r._contacts.length===0)&&r.hide(),t.page<e.getValue("pages")&&(t.page++,r._loadMoreContacts(e,t,n))},function(){r._busy=!1,r.options.onError()})},processContactModels:function(t,n,r){var i=this,s,o,u;try{u=t.map(function(e){return e.toJSON()})||[]}catch(a){u=[]}if(!i.contactIds){i.contactIds={};if(i._contacts)for(o in i._contacts)i.contactIds[o.id]=!0}return u=u.filter(function(e){return!i.contactIds[e.id]}),u.forEach(function(t,n){i.contactIds[t.id]=!0,t.realname=t.realname||t.username,t.isContact=r,t.buddyicon=e.URLHelper.getBuddyIconURL(t.nsid,t.iconfarm,t.iconserver)}),n&&i.options.me&&(s=i.options.me.toJSON(),e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s.buddyicon),s.buddyicon=s.buddyicon["default"],i.contactIds[s.id]=!0,s.me=!0,u.push(s)),i.options.hideInitially&&u.forEach(function(e){i.options.hideInitially.indexOf(e.nsid)>-1&&(e.hide=!0)}),u},destructor:function(){this.queryElEvent&&this.queryElEvent.detach&&this.queryElEvent.detach()},hide:function(e){e&&e.halt();if(!this._visible)return;this._visible=!1,this.highlighted=null,this.selectedIndex=0,this.selected=null,this.options.noShim||this._shimUp(!1),this.listEl.setStyle("display","none"),this.options.onHide&&this.options.onHide()},show:function(){if(this._visible)return;this._visible=!0,this.options.noShim||this._shimUp(),this.listEl.setStyle("display","block"),this._reposition(),this.options.onShow()},_reposition:function(){var n={width:t.innerWidth||t.clientWidth,height:t.innerHeight||t.clientHeight},r=this.options.el,i=r.getDOMNode(),s=i.getBoundingClientRect(),o=this.listEl.getDOMNode().getBoundingClientRect(),u=!this._contacts,a=u&&this.options.upInitially,f=t===e.config.win?s.top:i.clientTop,l;this.options.dialogOffset&&(l=this.options.dialogOffset()),a||f>0&&f+o.height+25>n.height&&!this.options.alwaysDownward?(this.listEl.setStyle("top","auto"),this.listEl.setStyle("bottom","25px"),this.options.onOrientationChange&&this.options.onOrientationChange(!0)):(this.listEl.setStyle("top",l||null),this.listEl.setStyle("bottom",null),this.options.onOrientationChange&&this.options.onOrientationChange(!1),r.ancestor(".modal",!0)&&this.listEl.setStyle("maxHeight",n.height-f-25))},_shimUp:function(t){if(t===!1){if(!this._shim)return;this._shim.detach("click").remove(),this._shim=null
;return}this._shim=e.Node.create("<div/>"),this._shim.addClass(this.options.shim),this._shim.on("click",this.hide.bind(this)),this.wrapperEl.appendChild(this._shim)},select:function(e){typeof e=="string"&&(e=this.getContact(e),e&&this.queryEl.set("value",e.realname)),e&&(this.selected=e,this.options.onSelect(e)),this.hide()},search:function(e){var t=this.queryEl.get(this.options.elValue),n=this,r,i,s,o=this.options.appContext.getViewer().nsid;if(e&&e.keyCode===27){e.preventDefault(),this.queryEl.blur();return}if(e&&[38,40,9].indexOf(e.keyCode)!==-1){e.preventDefault();return}this._nameTest(t),this.selected=null,this.selectedIndex=0,this.abort=!1;if(t.trim()==="")return this.abort=!0,this.hide();this.options.searchNonContacts||(this._end=!0,this._busy=!1);if(this._contacts&&this.options.me&&t==="me")return this.showResults(this._contacts.filter(function(e){return!e.hide&&e.me}).concat(this._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})));if(this._isEmail(t))return this.select({email:t,nsid:null});if(/,/.test(t))return this.select(null);if(!this._contacts){if(this.options.signedOut)return;this.showResults(),this.load(this.search.bind(this))}this._contacts&&(r=this._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})),this.showResults(r),i=n.listEl.getDOMNode(),this.options.searchNonContacts&&(this.options.loadMoreOnScroll&&t.length>0?(s=1,clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999,this.searchAllPeople=setTimeout(function(){n._searchPeople(t,o,s,n.searchInstanceId,function(){n._busy=!1,n.showResults(n._contacts.filter(function(e){return!e.hide&&n._matchesQuery(e)})),n.listElScrollEvent=n.listEl.on("scroll",function(){n.listEl._node.clientHeight+n.listEl._node.scrollTop===n.listEl._node.scrollHeight&&(s++,n._loadMore(s,o,t))})})},500)):(clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999))},_loadMore:function(e,t,n){var r=this;this._busy=!0,clearTimeout(this.searchAllPeople),this.searchInstanceId=Math.random()*999999,this.searchAllPeople=setTimeout(function(){r.options.loadingState&&!r.listEl.one("li.loading")&&r.appendLoader(),r._searchPeople(n,t,e,r.searchInstanceId,function(){r.showResults(r._contacts.filter(function(e){return!e.hide&&r._matchesQuery(e)})),r.listElScrollEvent&&r.listElScrollEvent.detach(),r.listElScrollEvent=r.listEl.on("scroll",function(){r.listEl._node.clientHeight+r.listEl._node.scrollTop===r.listEl._node.scrollHeight&&(e++,r._loadMore(e,t,n))})})},100)},_nameTest:function(t){var n=new RegExp(".*"+e.flutil.agnosticizeUnicode(t).replace(/\s/,"\\s")+".*","ig");this._matchesQuery=function(e){return n.test(e.username)||n.test(e.realname)||n.test(e.email)}},appendLoader:function(e){e=e||this.listEl;var t=document.createElement("li"),n=e.scrollTop;t.className="loading",t.innerHTML=this.options.loadingState,e.appendChild(t),e.scrollTop=n+t.clientHeight},_searchPeople:function(e,t,n,r,i){var s=this,o,u;s._end=!1,s.options.loadingState&&!s.listEl.one("li.loading")&&s.appendLoader(),o=s.options.appContext.getModel("contacts-models",t),o.then(function(t){return u=t.search({username:e,page:n}),u.then(function(e){var t=e.people,n=s.processContactModels(t,!1,!1);s._contacts=s._contacts||[],s._contacts=s._contacts.concat(n),s._contacts.some(function(e){return s._matchesQuery(e)})||(s._end=!0),i()},function(){s._end=!0,s._busy=!1,i()})},function(){s._end=!0,s._busy=!1,i()})},_isEmail:function(e,t){/,/.test(e)?e=e.split(/,/):e=[e];var n=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;if(t){while(e.length)if(n.test(e.shift().trim()))return!0;return!1}while(e.length)if(!n.test(e.shift().trim()))return!1;return!0},showResults:function(t){if(this.abort)return;var n=this.options.max||10,r,i,s=this;r=document.createDocumentFragment(),t&&this.selectedIndex>=t.length&&(this.selectedIndex=t.length-1),this.numShowing=Math.min(n,t&&t.length||0),!s._busy&&t&&t.length===0?(i=document.createElement("li"),i.innerHTML='<span class="no-contacts">'+this.intlMessage({intlName:"photo-page-scrappy.NO_MEMBERS_FOUND"})+"</span>",i.className="no-members",r.appendChild(i),s.highlighted=null):t&&t.slice(0,n).forEach(function(t,n,i){var o=s.createItem(t);n===s.selectedIndex&&(o.setAttribute("class","highlight"),s.highlighted=e.Node(o)),r.appendChild(o)}),(s._busy||!t)&&s.options.loadingState&&s.appendLoader(r),this.options.loadMoreOnScroll&&this.listElScrollEvent&&this.listElScrollEvent.detach(),this.listEl.setHTML(""),this.listEl.getDOMNode().appendChild(r),this.show()},_template:function(){return['<img src="{{buddyicon}}">','<div class="following-status {{isContact}}">','<span class="following-icon">&nbsp;</span>',"<span>"+this.intlMessage({intlName:"common.FOLLOWING"})+"</span>","</div>",'<h2 class="all">{{realname}}</h2>','<h3 class="all">{{username}}</h3>'].join("")},_onlyContactTemplate:['<img src="{{buddyicon}}">',"<h2>{{realname}}</h2>","<h3>{{username}}</h3>"].join(""),createItem:function(t){var n=document.createElement("li"),r,i=this.options.searchNonContacts&&this.options.showFollowingState?this._template():this._onlyContactTemplate,s=this.options.truncateLength||70;return r=i.replace(/\{\{(\w+)\}\}/g,function(n,r){if(r==="buddyicon")return t[r];if(r==="isContact")return t[r]?"am-following":"";var i=e.flutil.escapeInput(t[r]);return e.Handlebars.helpers.truncate(i,s)}),n.innerHTML=r,n.dataset?(n.dataset=n.dataset,n.dataset.nsid=t.nsid,n.dataset.displayname=t.realname||t.username,n.dataset.pathAlias=t.pathAlias,n.dataset.ispro=t.isPro):(n.setAttribute("data-nsid",t.nsid),n.setAttribute("data-displayname",t.realname||t.username),n.setAttribute("data-path-alias",t.pathAlias),n.setAttribute("data-ispro",t.isPro)),n}},e.mix(n.prototype,e.Localizable),e.ContactSearchBox=n},"@VERSION@",{requires:["api-helper","flutil","handlebars-helpers","flickr-contacts-getListfetcher"],langBundles:["common","photo-page-scrappy"]});
